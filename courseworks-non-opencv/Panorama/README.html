<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head>
<meta content="text/html; charset=ISO-8859-1" http-equiv="content-type"><title>Project 2</title></head><body>
<h1>Project2: Panorama Mosiac Stitching</h1>
What I did:<br>
<ol>
  <li>For "make your own 360 panorama" I took 17 translated images of WashU's Brookings building with Iphone SE using hand (no tripod). I converted the images to low (640x480) pixel using imageMagick's convert tool.</li>
  <li>Initially found (in mm) = 4.2mm using image's exif data. Then found f (in pixels) = 640*4.2mm/4.8mm = 560 pixels where 4.8mm was the<a href="http://www.devicespecifications.com/en/model/7a423ad7"> Iphone SE's camera sensor width </a> and 640 was the width of each down-sampled image</li>
  <li>Used SIFT feature detector and Features matchSiftFeatures to detect and match features.
  </li>
  <li>
    In ToDO #2 in BlendImages.cpp where we were supposed to align images seamlessly, I tried multiple variants of total width of the final image and the x-translation to get good seamlessness in both x initial and x final positions. To me, final width = mshape.width - 0.7* width and translation x = 0.425*x_0 worked in all test images( instead of width = mshape.width - width and translation x = 0.5*x_0 which cutoff important portions and the final planogram did not seem seamless in x_initial and x_final pixels) . 
  </li>
</ol>
What worked well:<br>
<ol>
  <li>Blending, feature matching(with SIFT), final y-translations in first and last-image 
  </li>cropping bad pixels(Extra credit)
</ol>
What did not work well:<br>
<ol>
  <li>Feature matching with project 1 feature matcher.</li>
  <li>Hand held iphone images for Brookings had slight ghosting effects due to hand movements in 3d y direction.</li>  
  <li>The radial distortion parameters (extra credit) came out to be close to zero.</li> 
</ol>

The following are results.<br>
<h3>
Campus</h3>

<img style="width: 800px; height: 114px;" alt="" src="images/campus_final.jpg"><br>
<a href="images/campus_final.jpg">High resolution</a><br>
<!-- <a href="data/bay.html">360 degree panorama</a><br> -->

<h3>Brookings</h3>
<img style="width: 800px; height: 92px;" alt="" src="images/brookings_final.jpg"><br>
<a href="images/brookings_final.jpg">High resolution</a><br>
<!-- <a href="data/handheld.html">360 degree panorama</a><br> -->

<h2>Extra Credit 1: Radial distortion correction</h2>
<p>I integrated Matlab with Camera Calibraiton Toolbox and found estimates for the  radial distortion parameters.</p>
<img style="width: 640px; height: 480px;" alt="" src="images/calib.png"><br>
<img style="width: 640px; height: 480px;" alt="" src="images/calib2.png"><br>
<p>The 16 images of checkerboards different orientations were analysed like above. The images were taken via same iphone I used to take panorama of brookings. The main <a href="images/calib.txt"> results </a> is as follows:
  <li>Focal Length:          fc = [ 548.71738   550.86964 ] +/- [ 3.50693   3.31368 ]
  </li>Distortion:            kc = [ 0.08898   -0.11683   -0.00534   -0.00085  0.00000 ] +/- [ 0.01014   0.04018   0.00105   0.00131  0.00000 ]
<br>
 Notice that my f (in pixels) closely matches the fc above. I used average fc = 557 pixels for distortion correction. 
</p>

<img style="width: 800px; height: 92px;" alt="" src="images/brookings_old_nocrop.jpg"><br>Non Corrected
<a href="images/brookings_old_nocrop.jpg">High resolution</a><br>
<div>VS</div>
<img style="width: 800px; height: 92px;" alt="" src="images/brookings_nocrop.jpg"><br>Radial Distoriton Corrected
<a href="images/brookings_nocrop.jpg">High resolution</a><br>
<p>Since my k1 and k2 came out to be low i.e. 0.08898 and -0.11683 respectively, the values had much less impact on the overall performace of the panorama. The panorama due to radial distortion correction is only slightly better (please notice the right flag above the brookings main building on both images).
</p>
<h2>Extra Credit 2: Automatic cropping of bad edge pixels</h2>
<p>Added new function cropBlackEdges that takes in the output of warpGlobal and crops the bad edges from the final output image. The algorithm finds the min_y and max_y position for the black pixels and crops the image accordingly.</p>
<div><h3>Brookings</h3>
<img style="width: 800px; height: 92px;" alt="" src="images/brookings_nocrop.jpg"><br>
<a href="images/brookings_nocrop.jpg">High resolution</a><br>
<div>VS</div>
<img style="width: 800px; height: 92px;" alt="" src="images/brookings_final.jpg"><br>
<a href="images/brookings_final.jpg">High resolution</a><br>
</div>
<div><h3>Campus</h3>
<img style="width: 800px; height: 92px;" alt="" src="images/campus.jpg"><br>
<a href="images/campus.jpg">High resolution</a><br>
<div>VS</div>
<img style="width: 800px; height: 92px;" alt="" src="images/campus_final.jpg"><br>
<a href="images/campus_final.jpg">High resolution</a><br>
</div>
<div><h3>Yosemite</h3>
<img style="width: 200px; height: 92px;" alt="" src="images/yosemite.jpg"><br>
<a href="images/yosemite.jpg">High resolution</a><br>
<div>VS</div>
<img style="width: 200px; height: 92px;" alt="" src="images/yosemite_final.jpg"><br>
<a href="images/yosemite_final.jpg">High resolution</a><br>
</div>
<!-- <a href="data/handheld.html">360 degree panorama</a><br> -->


</body></html>

